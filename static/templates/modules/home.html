<!-- Module Home - Vue d'ensemble en temps réel -->
<div class="home-container">
    <!-- Navbar avec contrôles de collecte -->
    <nav class="dh-navbar">
        <div class="dh-navbar-content">
            <div class="dh-navbar-left">
                <span class="dh-subtitle">Vue d'ensemble en temps réel</span>
            </div>
            
            <div class="dh-navbar-right">
                <!-- Badge de monitoring -->
                <div class="dh-monitoring-badge" id="dh-monitoring-badge" style="display: none;">
                    <i class="fas fa-chart-line"></i>
                    <span>Live</span>
                </div>
                
                <!-- Indicateur de statut -->
                <div class="dh-status-indicator" id="dh-status">
                    <span class="dh-status-dot"></span>
                    <span class="dh-status-text">Prêt</span>
                </div>
                
                <!-- Bouton de collecte -->
                <button class="dh-collect-btn" id="dh-collect-btn">
                    <i class="fas fa-play"></i>
                    <span>Démarrer l'enregistrement</span>
                </button>
                
                <!-- Timer de session -->
                <div class="dh-session-timer" id="dh-session-timer" style="display: none;">
                    <i class="fas fa-clock"></i>
                    <span id="dh-timer-display">00:00</span>
                </div>
                
                <!-- Menu de configuration -->
                <div class="dh-config-menu">
                    <button class="dh-config-btn" id="dh-config-btn" title="Configuration">
                        <i class="fas fa-cog"></i>
                    </button>
                    <div class="dh-config-dropdown" id="dh-config-dropdown" style="display: none;">
                        <div class="dh-config-item">
                            <label class="dh-config-label">
                                <input type="checkbox" id="dh-auto-start-checkbox" checked>
                                <span>Démarrage automatique du monitoring</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Zone principale avec grille optimisée -->
    <div class="dh-main-content">
        <!-- Grille principale 2x3 pour toutes les cartes -->
        <div class="dh-cards-grid">
            
            <!-- Carte Polar (Position 1,1) -->
            <div class="dh-card-minimal dh-card-polar" id="dh-polar-card">
                <div class="dh-card-top">
                    <h3 class="dh-card-title">
                        <i class="fas fa-heartbeat"></i>
                        Polar
                    </h3>
                    <div class="dh-status-mini" id="dh-polar-status">
                        <span class="device-indicator offline"></span>
                        <span class="status-text">Non connecté</span>
                    </div>
                </div>
                
                <div class="dh-card-main">
                    <!-- BPM Focus -->
                    <div class="dh-bpm-section">
                        <div class="dh-bpm-display">
                            <span class="dh-large-value" id="dh-bpm-value">--</span>
                            <span class="dh-large-unit">BPM</span>
                            <i class="fas fa-heart dh-beat-icon" id="dh-heart-icon"></i>
                        </div>
                        <div class="dh-bpm-stats">
                            <span>Min <strong id="dh-bpm-min">--</strong></span>
                            <span>Max <strong id="dh-bpm-max">--</strong></span>
                            <span>Moy <strong id="dh-bpm-avg">--</strong></span>
                        </div>
                        <canvas class="dh-mini-chart" id="dh-bpm-chart"></canvas>
                    </div>
                    
                    <!-- Données complémentaires en ligne -->
                    <div class="dh-data-row">
                        <div class="dh-data-item">
                            <div class="dh-metric-header">
                                <i class="fas fa-lungs"></i>
                                <span>Respiration</span>
                            </div>
                            <span class="dh-data-value"><span id="dh-breathing-value">--</span> RPM</span>
                        </div>
                        <div class="dh-data-separator"></div>
                        <div class="dh-data-item">
                            <div class="dh-metric-header">
                                <i class="fas fa-wave-square"></i>
                                <span>Intervalles RR</span>
                            </div>
                            <span class="dh-data-value"><span id="dh-rr-value">--</span> ms</span>
                            <span class="dh-data-sub">RMSSD <span id="dh-rr-rmssd">--</span></span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Carte Neurosity (Position 1,2) -->
            <div class="dh-card-minimal dh-card-neurosity" id="dh-neurosity-card">
                <div class="dh-card-top">
                    <h3 class="dh-card-title">
                        <i class="fas fa-brain"></i>
                        Neurosity Crown
                    </h3>
                    <div class="dh-status-mini" id="dh-neurosity-status">
                        <span class="device-indicator offline"></span>
                        <span class="status-text">Non connecté</span>
                        <span class="battery-indicator" id="dh-neurosity-battery" style="display: none;">
                            <i class="fas fa-battery-three-quarters"></i>
                            <span class="battery-level">--</span>%
                        </span>
                    </div>
                </div>
                
                <div class="dh-card-main">
                    <!-- Métriques principales avec cercles -->
                    <div class="dh-neuro-metrics">
                        <!-- Calm -->
                        <div class="dh-metric-circle">
                            <div class="dh-circle-progress" data-metric="calm">
                                <svg viewBox="0 0 100 100">
                                    <circle class="circle-bg" cx="50" cy="50" r="45"/>
                                    <circle class="circle-progress calm-progress" cx="50" cy="50" r="45"
                                            stroke-dasharray="283" stroke-dashoffset="283"/>
                                    <text class="circle-text" x="50" y="50">
                                        <tspan class="value" id="dh-calm-value">--</tspan>
                                        <tspan class="unit" dy="15" x="50">%</tspan>
                                    </text>
                                </svg>
                            </div>
                            <div class="dh-metric-label">
                                Calme
                            </div>
                        </div>
                        
                        <!-- Focus -->
                        <div class="dh-metric-circle">
                            <div class="dh-circle-progress" data-metric="focus">
                                <svg viewBox="0 0 100 100">
                                    <circle class="circle-bg" cx="50" cy="50" r="45"/>
                                    <circle class="circle-progress focus-progress" cx="50" cy="50" r="45"
                                            stroke-dasharray="283" stroke-dashoffset="283"/>
                                    <text class="circle-text" x="50" y="50">
                                        <tspan class="value" id="dh-focus-value">--</tspan>
                                        <tspan class="unit" dy="15" x="50">%</tspan>
                                    </text>
                                </svg>
                            </div>
                            <div class="dh-metric-label">
                                Focus
                            </div>
                        </div>
                    </div>
                    
                    <!-- Graphique des ondes cérébrales -->
                    <div class="dh-brainwaves-section">
                        <div class="dh-section-header">
                            <i class="fas fa-wave-square"></i>
                            <span>Ondes cérébrales</span>
                            <span class="dh-live-indicator" id="dh-brainwaves-indicator" style="display: none;">
                                <span class="live-dot"></span>
                                Live
                            </span>
                        </div>
                        <canvas class="dh-brainwaves-chart" id="dh-brainwaves-chart"></canvas>
                        <div class="dh-brainwaves-legend">
                            <div class="legend-item">
                                <span class="legend-color delta"></span>
                                <span>Delta (0.1-4Hz)</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color theta"></span>
                                <span>Theta (4-7.5Hz)</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color alpha"></span>
                                <span>Alpha (7.5-12.5Hz)</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color beta"></span>
                                <span>Beta (12.5-30Hz)</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color gamma"></span>
                                <span>Gamma (30-100Hz)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Carte Thermal (Position 1,3) -->
            <div class="dh-card-minimal dh-card-thermal" id="dh-thermal-card">
                <div class="dh-card-top">
                    <h3 class="dh-card-title">
                        <i class="fas fa-thermometer-half"></i>
                        Caméra Thermique
                    </h3>
                    <div class="dh-status-mini" id="dh-thermal-status">
                        <span class="device-indicator offline"></span>
                        <span class="status-text">Non connecté</span>
                    </div>
                </div>
                
                <div class="dh-card-main">
                    <!-- Silhouette avec points thermiques -->
                    <div class="dh-thermal-section">
                        <div class="dh-thermal-face">
                            <!-- Conteneur pour l'image avec positionnement relatif -->
                            <div class="dh-face-image-container">
                                <!-- Image du visage -->
                                <img src="/static/img/silhouette_bg.png" alt="Face thermique" class="dh-face-image">
                                
                                <!-- Points thermiques positionnés de manière absolue -->
                                <!-- Front -->
                                <div class="thermal-point-wrapper" style="top: 15%; left: 50%;">
                                    <div class="thermal-point" id="dh-thermal-front"></div>
                                    <div class="thermal-label">--°C</div>
                                </div>
                                
                                <!-- Œil Gauche -->
                                <div class="thermal-point-wrapper" style="top: 35%; left: 35%;">
                                    <div class="thermal-point" id="dh-thermal-oeil-gauche"></div>
                                    <div class="thermal-label">--°C</div>
                                </div>
                                
                                <!-- Œil Droit -->
                                <div class="thermal-point-wrapper" style="top: 35%; left: 65%;">
                                    <div class="thermal-point" id="dh-thermal-oeil-droit"></div>
                                    <div class="thermal-label">--°C</div>
                                </div>
                                
                                <!-- Nez -->
                                <div class="thermal-point-wrapper" style="top: 45%; left: 50%;">
                                    <div class="thermal-point" id="dh-thermal-nez"></div>
                                    <div class="thermal-label">--°C</div>
                                </div>
                                
                                <!-- Joue Gauche -->
                                <div class="thermal-point-wrapper" style="top: 50%; left: 25%;">
                                    <div class="thermal-point" id="dh-thermal-joue-gauche"></div>
                                    <div class="thermal-label">--°C</div>
                                </div>
                                
                                <!-- Joue Droite -->
                                <div class="thermal-point-wrapper" style="top: 50%; left: 75%;">
                                    <div class="thermal-point" id="dh-thermal-joue-droite"></div>
                                    <div class="thermal-label">--°C</div>
                                </div>
                                
                                <!-- Bouche -->
                                <div class="thermal-point-wrapper" style="top: 65%; left: 50%;">
                                    <div class="thermal-point" id="dh-thermal-bouche"></div>
                                    <div class="thermal-label">--°C</div>
                                </div>
                                
                                <!-- Menton -->
                                <div class="thermal-point-wrapper" style="top: 80%; left: 50%;">
                                    <div class="thermal-point" id="dh-thermal-menton"></div>
                                    <div class="thermal-label">--°C</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Statistiques thermiques -->
                        <div class="dh-thermal-stats">
                            <div class="dh-thermal-stat">
                                <span class="stat-label">Moy</span>
                                <span class="stat-value" id="dh-thermal-avg">--°C</span>
                            </div>
                            <div class="dh-thermal-stat">
                                <span class="stat-label">Max</span>
                                <span class="stat-value" id="dh-thermal-max">--°C</span>
                            </div>
                            <div class="dh-thermal-stat">
                                <span class="stat-label">Min</span>
                                <span class="stat-value" id="dh-thermal-min">--°C</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Graphique temporel des températures -->
                    <div class="dh-thermal-chart-section">
                        <div class="dh-section-header">
                            <i class="fas fa-chart-line"></i>
                            <span>Évolution des températures</span>
                            <span class="dh-live-indicator" id="dh-thermal-indicator" style="display: none;">
                                <span class="live-dot"></span>
                                Live
                            </span>
                        </div>
                        <canvas class="dh-thermal-chart" id="dh-thermal-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Carte Gazepoint (Position 2,1) -->
            <div class="dh-card-minimal dh-card-gazepoint" id="dh-gazepoint-card">
                <div class="dh-card-top">
                    <h3 class="dh-card-title">
                        <i class="fas fa-eye"></i>
                        Gazepoint
                    </h3>
                    <div class="dh-status-mini" id="dh-gazepoint-status">
                        <span class="device-indicator offline"></span>
                        <span class="status-text">Non connecté</span>
                    </div>
                </div>
                
                <div class="dh-card-main">
                    <!-- Visualisation des yeux -->
                    <div class="dh-eyes-section">
                        <div class="dh-eyes-display">
                            <!-- Œil gauche -->
                            <div class="dh-eye-container" id="dh-left-eye">
                                <svg viewBox="0 0 100 100" class="dh-eye-svg">
                                    <!-- Forme de l'œil -->
                                    <path class="dh-eye-shape" d="M10,50 Q50,20 90,50 Q50,80 10,50" fill="#ffffff" stroke="#374151" stroke-width="2"/>
                                    <!-- Iris -->
                                    <circle class="dh-eye-iris" cx="50" cy="50" r="20" fill="#3b82f6"/>
                                    <!-- Pupille -->
                                    <circle class="dh-eye-pupil" id="dh-left-pupil" cx="50" cy="50" r="8" fill="#000000"/>
                                    <!-- Reflet -->
                                    <circle cx="45" cy="45" r="3" fill="#ffffff" opacity="0.7"/>
                                    <!-- Paupière (masquée par défaut) -->
                                    <path class="dh-eye-lid" d="M10,50 Q50,50 90,50 Q50,20 10,50" fill="#fbbf24" opacity="0" id="dh-left-lid"/>
                                </svg>
                                <div class="dh-eye-label">Gauche</div>
                            </div>
                            
                            <!-- Œil droit -->
                            <div class="dh-eye-container" id="dh-right-eye">
                                <svg viewBox="0 0 100 100" class="dh-eye-svg">
                                    <!-- Forme de l'œil -->
                                    <path class="dh-eye-shape" d="M10,50 Q50,20 90,50 Q50,80 10,50" fill="#ffffff" stroke="#374151" stroke-width="2"/>
                                    <!-- Iris -->
                                    <circle class="dh-eye-iris" cx="50" cy="50" r="20" fill="#3b82f6"/>
                                    <!-- Pupille -->
                                    <circle class="dh-eye-pupil" id="dh-right-pupil" cx="50" cy="50" r="8" fill="#000000"/>
                                    <!-- Reflet -->
                                    <circle cx="45" cy="45" r="3" fill="#ffffff" opacity="0.7"/>
                                    <!-- Paupière (masquée par défaut) -->
                                    <path class="dh-eye-lid" d="M10,50 Q50,50 90,50 Q50,20 10,50" fill="#fbbf24" opacity="0" id="dh-right-lid"/>
                                </svg>
                                <div class="dh-eye-label">Droit</div>
                            </div>
                        </div>
                        
                        <!-- Métriques des pupilles -->
                        <div class="dh-pupil-metrics">
                            <div class="dh-pupil-metric">
                                <span class="metric-label">Dilatation</span>
                                <span class="metric-value" id="dh-pupil-size">-- mm</span>
                            </div>
                            <div class="dh-pupil-metric">
                                <span class="metric-label">Variation</span>
                                <span class="metric-value" id="dh-pupil-variation">-- %</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Visualisation du regard -->
                    <div class="dh-gaze-section">
                        <div class="dh-section-header">
                            <i class="fas fa-crosshairs"></i>
                            <span>Direction du regard</span>
                            <span class="dh-live-indicator" id="dh-gaze-indicator" style="display: none;">
                                <span class="live-dot"></span>
                                Live
                            </span>
                        </div>
                        
                        <!-- Canvas pour la visualisation du regard -->
                        <div class="dh-gaze-canvas-container">
                            <canvas id="dh-gaze-canvas" class="dh-gaze-canvas"></canvas>
                            <!-- Point de regard actuel -->
                            <div class="dh-gaze-point" id="dh-gaze-point"></div>
                        </div>
                        
                        <!-- Coordonnées du regard -->
                        <div class="dh-gaze-coords">
                            <span>X: <strong id="dh-gaze-x">--</strong></span>
                            <span>Y: <strong id="dh-gaze-y">--</strong></span>
                            <span>Fixation: <strong id="dh-fixation-time">-- ms</strong></span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Carte Thought Capture (Position 2,2 - Étendue sur 2 colonnes) -->
            <div class="dh-card-minimal dh-card-thought-capture" id="dh-thought-capture-card">
                <div class="dh-card-top">
                    <h3 class="dh-card-title">
                        <i class="fas fa-microphone"></i>
                        Capture de Pensée
                    </h3>
                    <div class="dh-status-mini" id="dh-thought-capture-status">
                        <span class="device-indicator offline"></span>
                        <span class="status-text">Prêt</span>
                        <span class="recording-timer" id="dh-thought-timer" style="display: none;">
                            <i class="fas fa-circle recording-dot"></i>
                            <span class="timer-text">00:00</span>
                        </span>
                    </div>
                </div>
                
                <div class="dh-card-main">
                    <!-- Visualiseur audio -->
                    <div class="dh-audio-visualizer-section">
                        <div class="dh-section-header">
                            <i class="fas fa-wave-square"></i>
                            <span>Visualisation audio</span>
                            <span class="dh-live-indicator" id="dh-audio-indicator" style="display: none;">
                                <span class="live-dot"></span>
                                REC
                            </span>
                        </div>
                        
                        <!-- Canvas pour la forme d'onde -->
                        <canvas class="dh-audio-waveform" id="dh-audio-waveform"></canvas>
                        
                        <!-- Niveau audio en temps réel -->
                        <div class="dh-audio-levels">
                            <div class="dh-audio-meter">
                                <div class="meter-label">Niveau</div>
                                <div class="meter-bar">
                                    <div class="meter-fill" id="dh-audio-level"></div>
                                </div>
                                <div class="meter-value" id="dh-audio-db">-∞ dB</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Statistiques d'enregistrement -->
                    <div class="dh-recording-stats">
                        <div class="dh-stat-item">
                            <i class="fas fa-file-audio"></i>
                            <span class="stat-label">Total</span>
                            <span class="stat-value" id="dh-total-recordings">0</span>
                        </div>
                        <div class="dh-stat-item">
                            <i class="fas fa-clock"></i>
                            <span class="stat-label">Durée totale</span>
                            <span class="stat-value" id="dh-total-duration">00:00</span>
                        </div>
                        <div class="dh-stat-item">
                            <i class="fas fa-database"></i>
                            <span class="stat-label">Taille</span>
                            <span class="stat-value" id="dh-total-size">0 MB</span>
                        </div>
                    </div>
                    
                    <!-- Contrôles rapides -->
                    <div class="dh-thought-controls">
                        <button class="dh-mini-control" id="dh-thought-record" title="Démarrer l'enregistrement">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <button class="dh-mini-control" id="dh-thought-pause" title="Pause" disabled>
                            <i class="fas fa-pause"></i>
                        </button>
                        <button class="dh-mini-control" id="dh-thought-stop" title="Arrêter" disabled>
                            <i class="fas fa-stop"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Elements cachés pour compatibilité JS -->
        <div style="display: none;">
            <span id="dh-breathing-amp">--</span>
            <span id="dh-rr-mean">--</span>
            <span id="dh-alpha-freq">8-12 Hz</span>
            <span id="dh-focus-trend">--</span>
            <div id="dh-breathing-wave"></div>
            <canvas id="dh-rr-chart"></canvas>
        </div>
    </div>
    
    <!-- Zone de notifications -->
    <div class="dh-notifications" id="dh-notifications"></div>
</div>